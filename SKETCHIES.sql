# DATABASE PURPOSE 
 # The database below is being created and managed for a customer company that specializes in trading NFTs. we have been contracted to create and manage 
# their database respecting the anonimity of their users and still efficiently summarizing their sales to be used for other business activites

 
 
# To create Database 
create database Sketchies;
# To specify which Database to use 
use Sketchies;
 
#create tables product detail, sales, gallery, customers,artist
create table PRODUCT_DETAILS(
PRODUCT_ID int ,
WORTH_$ int,
NFTTYPE VARCHAR (30),
ARTIST_ID VARCHAR (30),
PRIMARY KEY(PRODUCT_ID)
);
# TO VIEW TABLE 
 SELECT * FROM PRODUCT_DETAILS;
 DROP TABLE  PRODUCT_DETAIL;

# TO FILL TABLE
INSERT INTO PRODUCT_DETAILS (PRODUCT_ID, WORTH_$, NFTTYPE, ARTIST_ID)
VALUES 
(1001, 3000000, 'Art', 'JD12K'),
(1002, 10000, 'Audio', 'KF37L'),
(1003, 170000, 'Art',  'LK09J'),
(1004, 3000000, 'Cards', 'GH09W'),
(1005, 1000, 'Domain', 'TI21O'),
(1006, 39000, 'Music', 'AS31P'),
(1007, 280000, 'Art', 'RG89K'),
(1008, 90000, 'Art', 'FV78M'),
(1009, 12000, 'Music', 'CK97T'),
(1010, 72300, 'Meme', 'TR00L'),
(1011, 2000000, 'Meme','DO00M'),
(1012, 92000, 'Cards', 'EL03P'),
(1013, 283000, 'Domain','SH01W'),
(1015, 80000, 'Meme', 'TR43D'),
(1016, 1800, 'Video', 'LI73R'),
(1017, 2400, 'Video', 'WE33K'),
(1018, 4370000, 'Cards','SH41O'),
(1019, 4000, 'Art', 'UR56L'),
(1020, 8400, 'Meme', 'KE33N');

#TO VIEW THE NEW TABLE
SELECT * FROM PRODUCT_DETAIL;

# SOME ARTIST SUBMITTED MORE ART WORKS AND WOULD NOW BE ADDED TO THE PRODUCT_DETAIL TABLE 
INSERT INTO PRODUCT_DETAILS
VALUES 
(1021, 400000,'Meme', 'TR43D'),
(1022, 37300, 'Art', 'FV78M'),
(1023, 80000,'Art', 'TR43D');


 
 # CREATE TABLE ARTIST TO HOLD ARTIST DETAILS 
 # WHILE PROFIT IS A MAJOR PART OF SELLING NFTS AT SKETCHI WE BELIEVE THAT AN ART SHOULD BE ENJOYED AND APPRECIATED OUTSIDE OF ITS MONETARY VALUE HENCE 
 # THE GALLERY WHICH SHOWS ARTISTS AND THEIR ARTWORK JUST LIKE A TRADITIONAL GALLERY
 
 CREATE TABLE GALLERY (
 ARTIST_ID VARCHAR (30),
 PRODUCT_ID INT,
 FOREIGN KEY (PRODUCT_ID)
 REFERENCES Sketchies.PRODUCT_DETAILS (PRODUCT_ID)
 ON DELETE CASCADE ON UPDATE CASCADE
 );
  SELECT 
    *
FROM
    GALLERY;
 DROP TABLE GALLERY;
 
 # INSERT VALUES 
 INSERT INTO GALLERY (ARTIST_ID, PRODUCT_ID)
 VALUES
( 'JD12K',1001),
('KF37L',1002),
('LK09J',1003),
('GH09W',1004),
('TI21O',1005),
('AS31P',1006),
( 'RG89K',1007),
('FV78M',1008),
('CK97T',1009),
('TR00L',1010),
('DO00M',1011),
('EL03P',1012),
('SH01W',1013),
('TR43D',1015),
('LI73R',1016),
('WE33K',1017),
('SH41O',1018),
('UR56L',1019),
('KE33N',1020),
('TR43D',1021),
('FV78M',1022),
('TR43D',1023);

# A coustomer asks to see a list of the NFTs we have and the artist that made it 
SELECT * FROM GALLERY;
#ARTIST WITH ID FV78M IS WELL KNOWN FOR THEIR UNIQUE NFTS AND OUR CUSTOMER WOULD LIKE TO SEE WHICH OF HIS WORK WE CARRY
SELECT * FROM GALLERY WHERE ARTIST_ID = 'FV78M';

CREATE TABLE SALES (
PRODUCT_ID INT,
SALE_ID VARCHAR (30),
BID_DATE DATE,
SALES_CLOSE_DATE DATE,
WORTH_$ INT,
SALES_PRICE INT,
SALES_STATUS VARCHAR (12)
);

 DESC SALES;
 INSERT INTO SALES (PRODUCT_ID ,SALE_ID, BID_DATE , SALES_CLOSE_DATE, WORTH_$, SALES_PRICE,SALES_STATUS)
 VALUES
 (1001, 'A004','2022-1-22', '2022-1-24',3000000, 4700000, 'Complete'),
 (1009, 'A092',NULL,'2022-1-29',12000,12000,'Complete'),
 (1007,'A098',NULL, '2022-2-12', 280000, 230000, 'Complete'),
 (1012, 'A210','2022-2-11', NULL, 92000, NULL, 'Incomplete'),
 (1018, 'A241', NULL, '2022-2-18',4370000,4370000,'Complete'),
 (1020,'A200', '2022-3-1', '2022-3-8', 8400, 12000, 'Complete'),
 (1015, 'A890',  '2022-3-4', NULL, 80000, NULL, 'Incomplete'),
 (1008, 'A478', NULL, '2022-3-22', 90000,90000,'Complete'),
 (1022,'A019', '2022-3-19', '2022-3-21',37300,70000, 'Complete'),
 (1010, 'A300',NULL, '2022-3-28',72300,72300,'Complete')
 ;


CREATE TABLE CUSTOMERS (
CUSTOMER_ALIAS VARCHAR (30),
CRYPTO_USED VARCHAR (30)
);
 
INSERT INTO CUSTOMERS (CUSTOMER_ALIAS, CRYPTO_USED)
VALUES
('Kapatry', 'ETH'),
('FliNNas','BITCOIN'),
('Swanky', 'ETH'),
('SLINNAs', 'ETH'),
('PSYclops', 'BITCOIN'),
('OLIDART', 'ETH'),
('RATATOULIE', 'ETH'),
('MARIGOLD', 'BITCOIN'),
('DOT','ETH'),
('SLIAOP','ETH');



# NOW THAT WE ARE DONE CREATING THE DATABASE FOR SKETCHI LETS PLAY A LITTLE WITH SOME OTHER REQUESTS
#REQUESTS 1: WE ARE TRYING TO PUT TOGETHER A CATALOGUE FOR CUSTOMERS WHO CAN ONLY BUY NFTS $20000 AND BELOW COULD YOU PLEASE
# PULL UP THE NFTS IN THAT RANGE?
#RESPONSE: YES OFCOURSE, ESPECIALLY SINCE YOU ASKED NICELY.

SELECT * FROM PRODUCT_DETAILS WHERE WORTH_$ <= 20000;

/* REQUEST 2: COULD YOU PULL UP THE NFTS THAT SOLD HIGHER THAN THEIR WORTH AND THEIR APPRECIATION VALUE 
RESPONSE: OFCOURSE I'LL GET TO IT */
SELECT PRODUCT_ID,WORTH_$, SALES_PRICE,
SALES_PRICE -WORTH_$ AS APPRECIATION
FROM SALES
WHERE BID_DATE IS NOT NULL AND SALES_PRICE >WORTH_$
ORDER BY APPRECIATION;

/* REQUESTS 3: WE WOULD LIKE TO SEE THE NUMBER OF COMPLETE/INCOMPLETE SALES 
RESPONSE: ALRIGHT HERE YOU GO */
 SELECT COUNT(SALE_ID), SALES_STATUS
 FROM SALES 
 GROUP BY SALES_STATUS
 ORDER BY SALES_STATUS;
 
 /* REQUEST 4:  WE WOULD LIKE TO SEE ALL THE PRODUCTAS AND THEIR SALE STATUS 
 RESPONSE: ALRIGHT*/
SELECT  PRODUCT_DETAILS.PRODUCT_ID,
 SALES.SALES_STATUS 
FROM PRODUCT_DETAILS
LEFT JOIN SALES ON  PRODUCT_DETAILS.PRODUCT_ID=SALES.PRODUCT_ID;

/*REQUEST 5: ARTIST WITH THE USERNAME 'AS31P' WITHDREW THEIR ART WORK FROM OUR SITE AND WE WOULD LIKE TO UPDATE THE DATSBASE 
RESPOSE: I WOULD SIMPLY DELETE THEIR RECORDS FROM PRODUCT DETAILS AND IT WOULD BE UPDATED */
 DELETE FROM  PRODUCT_DETAILS 
 WHERE ARTIST_ID ='AS31P';
 
 /* TO CONFIRM */
 SELECT*FROM GALLERY WHERE 
  ARTIST_ID ='AS31P';
  
  
 



